# ğŸ½ï¸ Restaurant Booking & Order Management System

Há»‡ thá»‘ng quáº£n lÃ½ Ä‘áº·t bÃ n vÃ  Ä‘áº·t mÃ³n nhÃ  hÃ ng thÃ´ng minh vá»›i tÃ­nh nÄƒng gá»£i Ã½ mÃ³n Äƒn cÃ¡ nhÃ¢n hÃ³a dá»±a trÃªn AI.

## ğŸ“– Giá»›i thiá»‡u

ÄÃ¢y lÃ  má»™t giáº£i phÃ¡p toÃ n diá»‡n cho viá»‡c quáº£n lÃ½ nhÃ  hÃ ng, bao gá»“m:
- **Äáº·t bÃ n trÆ°á»›c** - KhÃ¡ch hÃ ng cÃ³ thá»ƒ Ä‘áº·t chá»— trÆ°á»›c khi Ä‘áº¿n nhÃ  hÃ ng
- **Order táº¡i bÃ n** - Gá»i mÃ³n trá»±c tiáº¿p khi Ä‘Ã£ ngá»“i vÃ o bÃ n
- **AI Suggestion** - Gá»£i Ã½ mÃ³n Äƒn thÃ´ng minh dá»±a trÃªn má»¥c tiÃªu sá»©c khá»e cÃ¡ nhÃ¢n (á»•n Ä‘á»‹nh cÃ¢n náº·ng, cáº£i thiá»‡n sá»©c khá»e)
- **Thanh toÃ¡n linh hoáº¡t** - Há»— trá»£ thanh toÃ¡n tiá»n máº·t vÃ  thanh toÃ¡n online qua PayOS
- **Quáº£n lÃ½ nhÃ  hÃ ng** - Dashboard cho nhÃ  hÃ ng quáº£n lÃ½ káº¿ hoáº¡ch mÃ³n Äƒn, Ä‘Æ¡n hÃ ng, booking vÃ  doanh thu

## âœ¨ TÃ­nh nÄƒng chÃ­nh

### ğŸ‘¥ KhÃ¡ch hÃ ng
- ğŸ« Äáº·t bÃ n trÆ°á»›c theo thá»i gian
- ğŸœ Order mÃ³n Äƒn táº¡i bÃ n
- ğŸ¤– Nháº­n gá»£i Ã½ mÃ³n Äƒn tá»« AI phÃ¹ há»£p vá»›i:
  - Má»¥c tiÃªu á»•n Ä‘á»‹nh cÃ¢n náº·ng
  - Cáº£i thiá»‡n sá»©c khá»e
  - Má»©c Ä‘á»™ hoáº¡t Ä‘á»™ng hÃ ng ngÃ y
- ğŸ’³ Thanh toÃ¡n qua nhiá»u phÆ°Æ¡ng thá»©c (tiá»n máº·t, PayOS)
- ğŸ“œ Theo dÃµi lá»‹ch sá»­ Ä‘áº·t bÃ n vÃ  order
- âœ… XÃ¡c thá»±c email

### ğŸª NhÃ  hÃ ng/Quáº£n lÃ½
- ğŸ“… LÃªn káº¿ hoáº¡ch mÃ³n Äƒn hÃ ng ngÃ y (Daily Plan)
- ğŸ“Š Theo dÃµi tÃ¬nh tráº¡ng Ä‘Æ¡n hÃ ng real-time
- ğŸ“† Quáº£n lÃ½ booking vÃ  tráº¡ng thÃ¡i bÃ n
- ğŸ’° Thá»‘ng kÃª doanh thu chi tiáº¿t
- ğŸ½ï¸ Quáº£n lÃ½ thá»±c Ä‘Æ¡n (mÃ³n Äƒn, topping)
- ğŸ‘¨â€ğŸ’¼ Quáº£n lÃ½ nhÃ¢n viÃªn vÃ  phÃ¢n quyá»n
- ğŸ“ˆ Dashboard thá»‘ng kÃª tá»•ng quan

## ğŸ› ï¸ Tech Stack

### Backend
- **Framework:** Spring Boot 3.2.2
- **Language:** Java 21
- **Build Tool:** Maven 3.9.5+
- **Database:** MySQL
- **Security:** Spring Security + OAuth2 Resource Server + JWT
- **API Documentation:** OpenAPI/Swagger
- **Payment Integration:** PayOS Java SDK
- **Cloud Storage:** Cloudinary
- **Async Processing:** Spring Async
- **Mapping:** MapStruct
- **Validation:** Spring Validation

### Frontend
- **Framework:** React
- **Language:** JavaScript/TypeScript

### CÃ´ng nghá»‡ khÃ¡c
- **AI/ML:** Service gá»£i Ã½ mÃ³n Äƒn dá»±a trÃªn thÃ´ng tin cÃ¡ nhÃ¢n
- **Email Service:** Spring Mail
- **Scheduling:** Spring Scheduler

## ğŸ“¦ YÃªu cáº§u há»‡ thá»‘ng

### Backend Requirements
- Java SDK 21 hoáº·c cao hÆ¡n
- Maven 3.9.5 hoáº·c cao hÆ¡n
- MySQL Server 8.0+
- Port 8080 available (hoáº·c cáº¥u hÃ¬nh trong application.yaml)

### Frontend Requirements
- Node.js 16+ vÃ  npm/yarn
- Port 3000 available (default React port)

## ğŸš€ CÃ i Ä‘áº·t vÃ  Cháº¡y

### Backend Setup

1. **Clone repository**
```bash
git clone <repository-url>
cd BackEnd
```

2. **Cáº¥u hÃ¬nh Database**
- Táº¡o database MySQL:
```sql
CREATE DATABASE restaurant_booking;
```

3. **Cáº¥u hÃ¬nh application.yaml**
Chá»‰nh sá»­a file `src/main/resources/application.yaml`:
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/restaurant_booking
    username: your_username
    password: your_password
```

4. **Cáº¥u hÃ¬nh PayOS**
ThÃªm PayOS credentials vÃ o `application.yaml`:
```yaml
payos:
  client-id: your_client_id
  api-key: your_api_key
  checksum-key: your_checksum_key
```

5. **Cáº¥u hÃ¬nh Cloudinary**
ThÃªm Cloudinary credentials:
```yaml
cloudinary:
  cloud-name: your_cloud_name
  api-key: your_api_key
  api-secret: your_api_secret
```

6. **Build vÃ  cháº¡y application**
```bash
# Build project
mvn clean package

# Cháº¡y application
mvn spring-boot:run
```

Application sáº½ cháº¡y táº¡i: `http://localhost:8080`

### Frontend Setup

```bash
cd frontend
npm install
npm start
```

Frontend sáº½ cháº¡y táº¡i: `http://localhost:3000`

## âš™ï¸ Cáº¥u hÃ¬nh

### Environment Variables
CÃ¡c biáº¿n mÃ´i trÆ°á»ng quan trá»ng trong `application.yaml`:

```yaml
# Database
spring.datasource.url
spring.datasource.username
spring.datasource.password

# JWT
jwt.secret
jwt.expiration

# PayOS
payos.client-id
payos.api-key
payos.checksum-key

# Cloudinary
cloudinary.cloud-name
cloudinary.api-key
cloudinary.api-secret

# Email
spring.mail.username
spring.mail.password
```

## ğŸ“ Cáº¥u trÃºc dá»± Ã¡n Backend

```
src/main/java/com/isp392/
â”œâ”€â”€ configuration/          # Cáº¥u hÃ¬nh á»©ng dá»¥ng
â”‚   â”œâ”€â”€ SecurityConfig     # Cáº¥u hÃ¬nh báº£o máº­t
â”‚   â”œâ”€â”€ OpenApiConfig      # Cáº¥u hÃ¬nh Swagger
â”‚   â”œâ”€â”€ PayOSConfig        # Cáº¥u hÃ¬nh PayOS
â”‚   â”œâ”€â”€ CloudinaryConfig   # Cáº¥u hÃ¬nh Cloudinary
â”‚   â””â”€â”€ AsyncConfig        # Cáº¥u hÃ¬nh xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™
â”œâ”€â”€ controller/            # REST API Controllers
â”‚   â”œâ”€â”€ AuthenticationController
â”‚   â”œâ”€â”€ BookingController
â”‚   â”œâ”€â”€ OrdersController
â”‚   â”œâ”€â”€ DishController
â”‚   â”œâ”€â”€ PaymentController
â”‚   â”œâ”€â”€ AIChatController   # AI suggestion
â”‚   â””â”€â”€ StatisticController
â”œâ”€â”€ service/               # Business Logic
â”œâ”€â”€ repository/            # Data Access Layer
â”œâ”€â”€ entity/                # JPA Entities
â”‚   â”œâ”€â”€ Account
â”‚   â”œâ”€â”€ Booking
â”‚   â”œâ”€â”€ Orders
â”‚   â”œâ”€â”€ Dish
â”‚   â”œâ”€â”€ Payment
â”‚   â””â”€â”€ DailyPlan
â”œâ”€â”€ dto/                   # Data Transfer Objects
â”‚   â”œâ”€â”€ request/
â”‚   â””â”€â”€ response/
â”œâ”€â”€ mapper/                # MapStruct Mappers
â”œâ”€â”€ enums/                 # Enumerations
â”‚   â”œâ”€â”€ BookingStatus
â”‚   â”œâ”€â”€ PaymentStatus
â”‚   â”œâ”€â”€ TableStatus
â”‚   â””â”€â”€ OrderDetailStatus
â”œâ”€â”€ exception/             # Exception Handling
â””â”€â”€ scheduler/             # Scheduled Tasks
```

## ğŸ“– API Documentation

Sau khi cháº¡y á»©ng dá»¥ng, truy cáº­p Swagger UI táº¡i:
```
http://localhost:8080/swagger-ui.html
```

### CÃ¡c endpoint chÃ­nh:

#### Authentication
- `POST /auth/register` - ÄÄƒng kÃ½ tÃ i khoáº£n
- `POST /auth/login` - ÄÄƒng nháº­p
- `POST /auth/logout` - ÄÄƒng xuáº¥t
- `POST /auth/refresh-token` - Refresh JWT token

#### Booking
- `GET /bookings` - Láº¥y danh sÃ¡ch booking
- `POST /bookings` - Táº¡o booking má»›i
- `PUT /bookings/{id}` - Cáº­p nháº­t booking
- `DELETE /bookings/{id}` - Há»§y booking

#### Orders
- `GET /orders` - Láº¥y danh sÃ¡ch Ä‘Æ¡n hÃ ng
- `POST /orders` - Táº¡o Ä‘Æ¡n hÃ ng
- `PUT /orders/{id}` - Cáº­p nháº­t Ä‘Æ¡n hÃ ng
- `GET /orders/{id}/details` - Chi tiáº¿t Ä‘Æ¡n hÃ ng

#### Dishes
- `GET /dishes` - Láº¥y danh sÃ¡ch mÃ³n Äƒn
- `POST /dishes` - ThÃªm mÃ³n Äƒn má»›i
- `PUT /dishes/{id}` - Cáº­p nháº­t mÃ³n Äƒn
- `DELETE /dishes/{id}` - XÃ³a mÃ³n Äƒn

#### AI Suggestion
- `POST /ai-chat` - Nháº­n gá»£i Ã½ mÃ³n Äƒn tá»« AI

#### Payment
- `POST /payment/create` - Táº¡o thanh toÃ¡n
- `POST /payment/payos-webhook` - Webhook tá»« PayOS
- `GET /payment/status/{id}` - Kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n

#### Statistics
- `GET /statistics/revenue` - Thá»‘ng kÃª doanh thu
- `GET /statistics/orders` - Thá»‘ng kÃª Ä‘Æ¡n hÃ ng
- `GET /statistics/bookings` - Thá»‘ng kÃª booking

## ğŸ’¾ Database Schema

### CÃ¡c báº£ng chÃ­nh:

- **account** - TÃ i khoáº£n ngÆ°á»i dÃ¹ng
- **customer** - ThÃ´ng tin khÃ¡ch hÃ ng
- **staff** - ThÃ´ng tin nhÃ¢n viÃªn
- **booking** - Äáº·t bÃ n
- **table_entity** - BÃ n Äƒn
- **dish** - MÃ³n Äƒn
- **topping** - Topping cho mÃ³n Äƒn
- **orders** - ÄÆ¡n hÃ ng
- **order_detail** - Chi tiáº¿t Ä‘Æ¡n hÃ ng
- **payment** - Thanh toÃ¡n
- **daily_plan** - Káº¿ hoáº¡ch mÃ³n Äƒn hÃ ng ngÃ y

### Enums quan trá»ng:

- **BookingStatus:** PENDING, CONFIRMED, CANCELLED, COMPLETED
- **PaymentStatus:** PENDING, PAID, FAILED, REFUNDED
- **PaymentMethod:** CASH, PAYOS
- **TableStatus:** AVAILABLE, OCCUPIED, RESERVED
- **OrderDetailStatus:** PENDING, PREPARING, READY, SERVED
- **Role:** ADMIN, STAFF, CUSTOMER

## ğŸ” Authentication & Authorization

Há»‡ thá»‘ng sá»­ dá»¥ng JWT (JSON Web Token) cho authentication:

1. User Ä‘Äƒng nháº­p vá»›i username/password
2. Server tráº£ vá» access token vÃ  refresh token
3. Client gá»­i access token trong header `Authorization: Bearer <token>`
4. Khi access token háº¿t háº¡n, sá»­ dá»¥ng refresh token Ä‘á»ƒ láº¥y token má»›i

### Roles vÃ  Permissions:
- **ADMIN:** Full access, quáº£n lÃ½ toÃ n bá»™ há»‡ thá»‘ng
- **STAFF:** Quáº£n lÃ½ Ä‘Æ¡n hÃ ng, booking, bÃ n
- **CUSTOMER:** Äáº·t bÃ n, order mÃ³n, xem lá»‹ch sá»­


## ğŸ“ Notes

- Há»‡ thá»‘ng sá»­ dá»¥ng Spring Async cho xá»­ lÃ½ email vÃ  notification
- PayOS webhook Ä‘Æ°á»£c cáº¥u hÃ¬nh tá»± Ä‘á»™ng verify signature
- Cloudinary Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ hÃ¬nh áº£nh mÃ³n Äƒn
- AI suggestion Ä‘Æ°á»£c tÃ­ch há»£p qua AIChatController
- Scheduled tasks tá»± Ä‘á»™ng cáº­p nháº­t tráº¡ng thÃ¡i booking vÃ  orders

---

**Developed with â¤ï¸**
